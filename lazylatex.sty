% lazylatex.sty
% This package is distributed under MIT license,
% please include LICENSE file when distributing.
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{lazylatex} [2018/12/23 v0.01 of LaTeX package]

% geometry for page setup
\RequirePackage[
	left=25.4mm,
	right=25.4mm,
	top=20mm,
	bottom=16mm,
	headsep=6mm,
	footskip=6mm]{geometry}

% better colour definitions
\RequirePackage[table]{xcolor}
% Colour definitions
\definecolor{Z99}{HTML}{ffffff}
\definecolor{Z0}{HTML}{000000}
\definecolor{Z1}{HTML}{333333}
\definecolor{Z2}{HTML}{666666}
\definecolor{Z3}{HTML}{999999}
\definecolor{Z4}{HTML}{f7f7f7}
\definecolor{R0}{HTML}{D62728}
\definecolor{R1}{HTML}{EE3A43}
\definecolor{R2}{HTML}{f37279}
\definecolor{O0}{HTML}{FF7F0E}
\definecolor{O1}{HTML}{ffad66}
\definecolor{O2}{HTML}{ffd6b3}
\definecolor{B0}{HTML}{1F77B4}
\definecolor{B1}{HTML}{51a5e1}
\definecolor{B2}{HTML}{a8d2f0}
\definecolor{G0}{HTML}{2CA02C}
\definecolor{G1}{HTML}{5fd35f}
\definecolor{G2}{HTML}{9be49b}
\definecolor{Y0}{HTML}{fecb01}
\definecolor{Y1}{HTML}{fedb4d}
\definecolor{Y2}{HTML}{feea9a}
\definecolor{V0}{HTML}{ace600}
\definecolor{V1}{HTML}{d2ff4d}
\definecolor{V2}{HTML}{ecffb3}
\definecolor{colPreBody}{HTML}{FFFFFF}
\definecolor{colPreFrame}{HTML}{D9DEDF}
\definecolor{colPreText}{HTML}{DE352E}
\definecolor{colFnameFrame}{HTML}{E0E4E5}
\definecolor{colLibBody}{HTML}{E5FFE5}
\definecolor{colLibHead}{HTML}{7FDFA0}
\definecolor{colLibFrame}{HTML}{61ab54}
\definecolor{colLibText}{HTML}{404040}
\definecolor{colGuilabelBody}{HTML}{E7F2FA}
\definecolor{colGuilabelFrame}{HTML}{7FBBE3}
\definecolor{colGuilabelText}{HTML}{404040}
\definecolor{colNoticeHead}{HTML}{6AB0DE}
\definecolor{colNoticeBody}{HTML}{E4EFF7}
\definecolor{colWarningHead}{HTML}{F0B27E}
\definecolor{colWarningBody}{HTML}{FEECCA}
\definecolor{colErrorHead}{HTML}{F19F97}
\definecolor{colErrorBody}{HTML}{FDF3F2}
\definecolor{colTipHead}{HTML}{18BC9B}
\definecolor{colTipBody}{HTML}{DBFAF4}
\definecolor{colSidebarHead}{HTML}{E0E4E5}
\definecolor{colSidebarBody}{HTML}{F2F6F6}
\definecolor{colSidebarFrame}{HTML}{E0E4E5}
\definecolor{colTableFrame}{HTML}{E0E4E5}
\definecolor{colTableRowOdd}{HTML}{F2F6F6}
\definecolor{colMintedBg}{HTML}{EDFFCC}
\definecolor{colMintedRule}{HTML}{E0E4E5}
\definecolor{colMintedGutter}{HTML}{e4ffb3}
\definecolor{colMintedLinenos}{HTML}{999999}
\definecolor{colMintedLiteralBg}{HTML}{F8F8F8}
\definecolor{colMintedLiteralRule}{HTML}{E0E4E5}
\definecolor{colLink}{HTML}{2880B9}

% Code blocks are using minted library
% use -shell-escape upon compilation. 
\RequirePackage[outputdir=.texpadtmp]{minted}
% Minted Line Number Colors
\renewcommand{\theFancyVerbLine}{\sffamily
\textcolor{Z3}{\scriptsize
\oldstylenums{\arabic{FancyVerbLine}}}}
%
\RequirePackage{tikz}

\RequirePackage{tcolorbox}
% Package Options
\tcbuselibrary{minted}
\tcbuselibrary{skins}

\RequirePackage{wrapfig}
\setlength{\intextsep}{0pt} % "top" vertical spacing in wrapfig

% Following are for tables
\RequirePackage{array,tabularx}
\RequirePackage{colortbl}
% Tabularx settings
\newcolumntype{Y}{>{\raggedleft\arraybackslash}X} % column align right
\newcolumntype{Z}{>{\centering\arraybackslash}X} % column align center
\newcolumntype{L}[1]{>{\hsize=#1\hsize\raggedright\arraybackslash}X}% column Left align with width in % of total
\newcolumntype{R}[1]{>{\hsize=#1\hsize\raggedleft\arraybackslash}X}% column right align with width in % of total
\newcolumntype{C}[1]{>{\hsize=#1\hsize\centering\arraybackslash}X}% column center align with width in % of total
%\rowcolors{1}{Z99}{colTableRowOdd} % Coloring Odd rows moved to lazytable

% PDF styling and links
\RequirePackage{hyperref}
% Hyperref settings
\hypersetup{
	unicode=true,
	bookmarks=true,
	bookmarksopen=true,
	pdfstartview=FitH,
	pdfpagelayout=OneColumn,
	pdfpagemode=UseOutlines,
	colorlinks=true,
	linkcolor=colLink,
	urlcolor=colLink,
	citecolor=colLink,
	bookmarksnumbered
}

% Line spacing
\RequirePackage{setspace}
%\singlespacing
%\onehalfspacing
%\doublespacing
\setstretch{1.15} % custom
% Paragraph indentation:
% Indent first line of all paragraphs (including the first),
% as in IEEE style.
\let\@afterindentfalse\@afterindenttrue


% Indented blocks
\newcommand{\indentBlock}[1]{\noindent\hangafter=0\hangindent=#1\parindent\ignorespaces}
% Hanging blocks.
\newcommand{\indentHang}{\noindent\hangafter=1\hangindent=\parindent\ignorespaces}

% InLine Markup
\newtcbox{\lib}[1][]{
	on line,
	arc=2pt,
%	height=20pt,
%	valign=center,
	fontupper=\sffamily,
	boxsep=0pt,
	before upper={\rule[-3pt]{0pt}{10pt}},
	left=17pt,right=4pt,top=4pt,bottom=4pt,
	boxrule=0.7pt,
	colback=colLibBody,
	colframe=colLibFrame,
	coltext=Z0,
	enhanced,overlay={
	\begin{tcbclipinterior}
		\sffamily;
	    \fill[colLibHead] (frame.south west) rectangle ([xshift=15pt]frame.north west);
	    \draw[Z99] (frame.south west) node[xshift=8pt,yshift=10pt,transform shape,rotate=90,scale=0.65] {\textbf{LIB}};
	\end{tcbclipinterior}
	},
}
\newtcbox{\fname}[1][]{
	on line,
	fontupper=\itshape,
	arc=0pt,
	outer arc=0pt,
	boxsep=0pt,
	before upper={\rule[-3pt]{0pt}{10pt}},
	left=4pt,right=4pt,top=2pt,bottom=2pt,
	boxrule=0.7pt,
	colback=Z99,
	colframe=colFnameFrame,
	coltext=Z0,
}
\newtcbox{\pre}[1][]{
	on line,
	arc=0pt,
	outer arc=0pt,
	boxsep=0pt,
	before upper={\rule[-3pt]{0pt}{10pt}},
	left=2pt,right=2pt,top=2pt,bottom=2pt,
	boxrule=0.7pt,
	colback=colPreBody,
	colframe=colPreFrame,
	coltext=colPreText,
}
\newtcbox{\guilabel}[1][]{
	on line,
	arc=5pt,
	before upper={\rule[-3pt]{0pt}{10pt}},
	fontupper=\sffamily,
	boxrule=1pt,
	boxsep=0pt,
	left=6pt,right=6pt,top=2pt,bottom=2pt,
	colback=colGuilabelBody,
	colframe=colGuilabelFrame,
	coltext=Z0,
}

% Admonitions
\newtcolorbox{note}[1][\textbf{!} Note]{
	boxrule=0pt,
	width=\textwidth,
	colback=colNoticeBody,
	colbacktitle=colNoticeHead,
	outer arc=0pt,
	arc=0pt,
	left=10pt,
	right=10pt,
	top=10pt,
	bottom=10pt,
	toptitle=3pt,
	bottomtitle=3pt,
	fonttitle=\sffamily\large,
	title={#1},
}
\newtcolorbox{warning}[1][\textbf{!} Warning]{
	boxrule=0pt,
	width=\textwidth,
	colback=colWarningBody,
	colbacktitle=colWarningHead,
	outer arc=0pt,
	arc=0pt,
	left=10pt,
	right=10pt,
	top=10pt,
	bottom=10pt,
	toptitle=3pt,
	bottomtitle=3pt,
	fonttitle=\sffamily\large,
	title={#1}
}
\newtcolorbox{error}[1][\textbf{!} Error]{
	boxrule=0pt,
	width=\textwidth,
	colback=colErrorBody,
	colbacktitle=colErrorHead,
	outer arc=0pt,
	arc=0pt,
	left=10pt,
	right=10pt,
	top=10pt,
	bottom=10pt,
	toptitle=3pt,
	bottomtitle=3pt,
	fonttitle=\sffamily\large,
	title={#1}
}
\newtcolorbox{tip}[1][\textbf{!} Tip]{
	boxrule=0pt,
	width=\textwidth,
	colback=colTipBody,
	colbacktitle=colTipHead,
	outer arc=0pt,
	arc=0pt,
	left=10pt,
	right=10pt,
	top=10pt,
	bottom=10pt,
	toptitle=3pt,
	bottomtitle=3pt,
	fonttitle=\sffamily\large,
	title={#1}
}

% Code Block
\newtcblisting[auto counter,number format=\arabic,
list inside=code]{code}[1]{
	fontupper=\tt,
	listing engine=minted,
	listing only,
	colback=colMintedBg,
	colframe=colMintedRule,
	arc=0pt,outer arc=0pt,boxsep=0pt,boxrule=0.5pt,
	left=30pt,right=10pt,top=10pt,bottom=10pt,
	minted language=#1,
	minted options={breaklines,autogobble,linenos,numbersep=3mm},
	enhanced,overlay={
	\begin{tcbclipinterior}
		\fill[colMintedGutter] (frame.south west) rectangle ([xshift=30pt]frame.north west);
	\end{tcbclipinterior}
	},
}

% Usage:
% \begin{lazycode}[This is the title,   label={myCodeLabel},nameref={Code title or whatever}]{<programing language>}
% ...
% \end{lazycode}

\newtcblisting[auto counter,number format=\arabic,
list inside=code]{lazycode}[2][]{
	fontupper=\tt,
	listing engine=minted,
	listing only,
	colback=colMintedBg,
	colframe=colMintedRule,
	arc=0pt,outer arc=0pt,boxsep=0pt,boxrule=0.5pt,
	left=30pt,right=10pt,top=10pt,bottom=10pt,
	title=Code \thetcbcounter: #1,
	attach boxed title to bottom center,
	colbacktitle=Z99,coltitle=Z0,
	boxed title style={colframe=Z99},
	minted language=#2,
	minted options={breaklines,autogobble,linenos,numbersep=3mm},
	enhanced,overlay={
	\begin{tcbclipinterior}
		\fill[colMintedGutter] (frame.south west) rectangle ([xshift=30pt]frame.north west);
	\end{tcbclipinterior}
	},
}


\newtcblisting{literal}{
	fontupper=\tt,
	listing engine=minted,
	listing only,
	colback=colMintedLiteralBg,
	colframe=colMintedLiteralRule,
	arc=0pt,outer arc=0pt,boxsep=0pt,boxrule=0.5pt,
	left=10pt,right=10pt,top=10pt,bottom=10pt,
	minted options={breaklines,autogobble},
}

% Sidebar: wrapp with wrapfigure for float and width
\newtcolorbox{sidebar}[1]{
	boxrule=1pt,
	colback=colSidebarBody,
	colbacktitle=colSidebarHead,
	coltitle=Z1,
	colframe=colSidebarFrame,
	outer arc=0pt,
	arc=0pt,
	left=10pt,
	right=10pt,
	top=10pt,
	bottom=10pt,
	toptitle=3pt,
	bottomtitle=3pt,
	fonttitle=\sffamily\large,
	title=#1,
}

% Table: wrap with `table` for label
\newtcolorbox{lazytable}[2][\textwidth]{
	enhanced,
	outer arc=0pt,
	arc=0pt,
	width=#1,
	fontupper=\normalsize\sffamily,
	colback=Z99,
	boxrule=1pt,
	colframe=colTableFrame,
	tabularx*={\rowcolors{1}{Z99}{colTableRowOdd}}#2,
}

% Lists
\newenvironment{llist}[2][\textwidth]
{\tabularx{#1}{#2}}
{\endtabularx}

% for Hlist
\newcommand{\litem}[1]{%
$\bullet$\ #1
}

% Length settings
\setlength{\abovecaptionskip}{5pt plus 3pt minus 2pt} % Caption Upper
\setlength{\belowcaptionskip}{10pt plus 3pt minus 2pt} % Caption Lower
%\setlength{\parindent}{0pt} % No paragraph indent
%\renewcommand{\familydefault}{\sfdefault}
\endinput
